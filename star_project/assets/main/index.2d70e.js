window.__require=function e(t,o,n){function c(s,r){if(!o[s]){if(!t[s]){var h=s.split("/");if(h=h[h.length-1],!t[h]){var a="function"==typeof __require&&__require;if(!r&&a)return a(h,!0);if(i)return i(h,!0);throw new Error("Cannot find module '"+s+"'")}s=h}var p=o[s]={exports:{}};t[s][0].call(p.exports,function(e){return c(t[s][1][e]||e)},p,p.exports,e,t,o,n)}return o[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<n.length;s++)c(n[s]);return c}({ButtonPlus:[function(e,t,o){"use strict";cc._RF.push(t,"cb0faAMuexNRY14JpGVjG/Q","ButtonPlus");var n,c=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var c,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var r=e.length-1;r>=0;r--)(c=e[r])&&(s=(i<3?c(s):i>3?c(t,o,s):c(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,h=s.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_hover_time=1,t.longTouchEvents=[],t.touchStartEvents=[],t.touchEndEvents=[],t}return c(t,e),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchStartPlus,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEndPlus,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelPlus,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchStartPlus,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEndPlus,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelPlus,this)},t.prototype._onTouchStartPlus=function(){console.log("\u957f\u6309\u5f00\u59cb"),cc.Component.EventHandler.emitEvents(this.touchStartEvents),this.schedule(this._trigger_events,this.btn_hover_time)},t.prototype._onTouchEndPlus=function(){console.log("\u957f\u6309\u7ed3\u675f"),cc.Component.EventHandler.emitEvents(this.touchEndEvents),this.unschedule(this._trigger_events)},t.prototype._onTouchCancelPlus=function(){console.log("\u957f\u6309\u53d6\u6d88"),cc.Component.EventHandler.emitEvents(this.touchEndEvents),this.unschedule(this._trigger_events)},t.prototype._trigger_events=function(){cc.Component.EventHandler.emitEvents(this.longTouchEvents)},i([h({type:cc.Integer,tooltip:"\u957f\u6309\u89e6\u53d1\u957f\u6309\u7684\u65f6\u957f",displayName:"\u89e6\u53d1\u957f\u6309\u7684\u65f6\u957f(s)",step:.1})],t.prototype,"btn_hover_time",void 0),i([h({type:cc.Component.EventHandler,tooltip:"\u89e6\u53d1\u957f\u6309\u540e\u7684\u56de\u8c03\u51fd\u6570\\n\u5f53\u524d\u8282\u70b9\u6709\u957f\u6309\u4e8b\u4ef6\uff0c\u5219\u89e6\u53d1\u6240\u6709\u4e8b\u4ef6",displayName:"\u957f\u6309\u4e8b\u4ef6"})],t.prototype,"longTouchEvents",void 0),i([h({type:cc.Component.EventHandler,tooltip:"\u957f\u6309\u5f00\u59cb",displayName:"\u957f\u6309\u5f00\u59cb"})],t.prototype,"touchStartEvents",void 0),i([h({type:cc.Component.EventHandler,tooltip:"\u957f\u6309\u7ed3\u675f",displayName:"\u957f\u6309\u7ed3\u675f"})],t.prototype,"touchEndEvents",void 0),i([r("ButtonPlus")],t)}(cc.Component);o.default=a,cc._RF.pop()},{}],GameCamera:[function(e,t,o){"use strict";cc._RF.push(t,"b0d652CtzZOlrA82DLZq0gr","GameCamera"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameCamera=void 0;var n=function(){function e(e,t,o){this.mapNode=t,this.roleNode=o,this.mapNode.width>e.width?this.xRange=(this.mapNode.width-e.width)/2:this.xRange=0,this.mapNode.height>e.height?this.yRange=(this.mapNode.height-e.height)/2:this.yRange=0,this.lastRoleX=o.x,this.lastRoleY=o.y,console.log("\u6444\u50cf\u5934\u6700\u5927\u79fb\u52a8\u8ddd\u79bb:",this.xRange,this.yRange)}return e.prototype.updatePosition=function(){if(this.lastRoleX!=this.roleNode.x||this.lastRoleY!=this.roleNode.y){this.lastRoleX=this.roleNode.x,this.lastRoleY=this.roleNode.y;var e=this.roleNode.x,t=this.roleNode.y;this.mapNode.x=-e,this.mapNode.y=-t,this.mapNode.x>this.xRange?(this.mapNode.x=this.xRange,console.log("\u6444\u50cf\u5934\u8d85\u8fc7\u53f3\u8fb9\u754c")):this.mapNode.x<-this.xRange&&(this.mapNode.x=-this.xRange,console.log("\u6444\u50cf\u5934\u8d85\u8fc7\u5de6\u8fb9\u754c")),this.mapNode.y>this.yRange?(this.mapNode.y=this.yRange,console.log("\u6444\u50cf\u5934\u8d85\u8fc7\u4e0a\u8fb9\u754c")):this.mapNode.y<-this.yRange&&(this.mapNode.y=-this.yRange,console.log("\u6444\u50cf\u5934\u8d85\u8fc7\u4e0b\u8fb9\u754c"))}},e}();o.GameCamera=n,cc._RF.pop()},{}],const:[function(e,t){"use strict";cc._RF.push(t,"3e172/cH7RGwLNv5D7Ru8Rz","const"),cc._RF.pop()},{}],player:[function(e,t,o){"use strict";cc._RF.push(t,"b2ebc6jJR1BN4hMrLMNHBfc","player");var n,c=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var c,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var r=e.length-1;r>=0;r--)(c=e[r])&&(s=(i<3?c(s):i>3?c(t,o,s):c(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./GameCamera"),r=cc._decorator,h=r.ccclass,a=r.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mapNode=null,t.roleNode=null,t.viewPort=null,t.keyCache={},t.roleSpeed=10,t}return c(t,e),t.prototype.onLoad=function(){console.log("onLoad"),this.gameCamera=new s.GameCamera(this.viewPort,this.mapNode,this.roleNode),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},t.prototype.update=function(){this.updateRoleMove(),this.updateCamera()},t.prototype.updateRoleMove=function(){this.keyCache[cc.macro.KEY.up]&&(this.roleNode.y+=this.roleSpeed),this.keyCache[cc.macro.KEY.down]&&(this.roleNode.y-=this.roleSpeed),this.keyCache[cc.macro.KEY.left]&&(this.roleNode.x-=this.roleSpeed),this.keyCache[cc.macro.KEY.right]&&(this.roleNode.x+=this.roleSpeed),this.roleNode.x+this.roleNode.width/2>this.mapNode.width/2?(this.roleNode.x=this.mapNode.width/2-this.roleNode.width/2,console.log("\u4eba\u7269\u8d85\u8fc7\u5730\u56fe\u53f3\u8fb9\u7f18")):this.roleNode.x-this.roleNode.width/2<-this.mapNode.width/2&&(this.roleNode.x=-this.mapNode.width/2+this.roleNode.width/2,console.log("\u4eba\u7269\u8d85\u8fc7\u5730\u56fe\u5de6\u8fb9\u7f18")),this.roleNode.y+this.roleNode.height/2>this.mapNode.height/2?(this.roleNode.y=this.mapNode.height/2-this.roleNode.height/2,console.log("\u4eba\u7269\u8d85\u8fc7\u5730\u56fe\u4e0a\u8fb9\u7f18")):this.roleNode.y-this.roleNode.height/2<-this.mapNode.height/2&&(this.roleNode.y=-this.mapNode.height/2+this.roleNode.height/2,console.log("\u4eba\u7269\u8d85\u8fc7\u5730\u56fe\u4e0b\u8fb9\u7f18"))},t.prototype.updateCamera=function(){this.gameCamera.updatePosition()},t.prototype.onKeyDown=function(e){this.keyDown(e.keyCode)},t.prototype.onTouchStart=function(e){switch(e){case"1":this.keyDown(cc.macro.KEY.up);break;case"2":this.keyDown(cc.macro.KEY.down);break;case"3":this.keyDown(cc.macro.KEY.left);break;case"4":this.keyDown(cc.macro.KEY.right)}},t.prototype.keyDown=function(e){var t=this.roleNode.getComponent(cc.Animation);switch(e){case cc.macro.KEY.up:this.keyCache[cc.macro.KEY.up]=!0,console.log("\u6309\u4e0bUp"),t.getAnimationState("phoebe_up").isPlaying||this.roleNode.getComponent(cc.Animation).play("phoebe_up");break;case cc.macro.KEY.down:this.keyCache[cc.macro.KEY.down]=!0,console.log("\u6309\u4e0bDown"),t.getAnimationState("phoebe_down").isPlaying||this.roleNode.getComponent(cc.Animation).play("phoebe_down");break;case cc.macro.KEY.left:this.keyCache[cc.macro.KEY.left]=!0,console.log("\u6309\u4e0bLeft"),t.getAnimationState("phoebe_left").isPlaying||this.roleNode.getComponent(cc.Animation).play("phoebe_left");break;case cc.macro.KEY.right:this.keyCache[cc.macro.KEY.right]=!0,console.log("\u6309\u4e0bRight"),t.getAnimationState("phoebe_right").isPlaying||this.roleNode.getComponent(cc.Animation).play("phoebe_right")}},t.prototype.onKeyUp=function(e){this.keyUp(e.keyCode)},t.prototype.onTouchEnd=function(e){switch(e){case"1":this.keyUp(cc.macro.KEY.up);break;case"2":this.keyUp(cc.macro.KEY.down);break;case"3":this.keyUp(cc.macro.KEY.left);break;case"4":this.keyUp(cc.macro.KEY.right)}},t.prototype.keyUp=function(e){switch(e){case cc.macro.KEY.up:this.keyCache[cc.macro.KEY.up]=!1,console.log("\u677e\u5f00Up"),this.roleNode.getComponent(cc.Animation).play("phoebe_up",0),this.roleNode.getComponent(cc.Animation).sample("phoebe_up");break;case cc.macro.KEY.down:this.keyCache[cc.macro.KEY.down]=!1,console.log("\u677e\u5f00Down"),this.roleNode.getComponent(cc.Animation).play("phoebe_down",0),this.roleNode.getComponent(cc.Animation).sample("phoebe_down");break;case cc.macro.KEY.left:this.keyCache[cc.macro.KEY.left]=!1,console.log("\u677e\u5f00Left"),this.roleNode.getComponent(cc.Animation).play("phoebe_left",0),this.roleNode.getComponent(cc.Animation).sample("phoebe_left");break;case cc.macro.KEY.right:this.keyCache[cc.macro.KEY.right]=!1,console.log("\u677e\u5f00Right"),this.roleNode.getComponent(cc.Animation).play("phoebe_right",0),this.roleNode.getComponent(cc.Animation).sample("phoebe_right")}this.roleNode.getComponent(cc.Animation).stop()},i([a({type:cc.Node,tooltip:"\u5730\u56fe\u8282\u70b9"})],t.prototype,"mapNode",void 0),i([a({type:cc.Node,tooltip:"\u4eba\u7269\u8282\u70b9"})],t.prototype,"roleNode",void 0),i([a({type:cc.Node,tooltip:"\u89c6\u53e3"})],t.prototype,"viewPort",void 0),i([h],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./GameCamera":"GameCamera"}]},{},["ButtonPlus","GameCamera","const","player"]);